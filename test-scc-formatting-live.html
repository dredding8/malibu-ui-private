<!DOCTYPE html>
<html>
<head>
    <title>SCC Formatting Test</title>
</head>
<body>
    <h1>SCC Formatting Test</h1>
    <div id="results"></div>

    <script>
        // Simulate the formatSccNumber function
        function parseSccNumber(input) {
            if (!input) return null;
            const cleaned = input.replace(/^(SCC[-\s:]?)/i, '').trim();
            const parsed = parseInt(cleaned, 10);
            if (isNaN(parsed) || parsed < 1 || parsed > 99999) {
                return null;
            }
            return parsed;
        }

        function formatSccNumber(scc, minDigits = 5) {
            if (scc === undefined || scc === null) {
                return 'N/A';
            }

            // If string, try to parse it
            if (typeof scc === 'string') {
                const parsed = parseSccNumber(scc);
                if (parsed === null) {
                    return 'N/A';
                }
                scc = parsed;
            }

            const numericScc = Number(scc);

            if (numericScc < 1 || numericScc > 99999) {
                console.warn(`SCC out of range: ${numericScc}`);
                return 'N/A';
            }

            return String(numericScc).padStart(minDigits, '0');
        }

        // Test cases
        const tests = [
            { input: 'unit-1', expected: 'N/A' },
            { input: 12345, expected: '12345' },
            { input: 123, expected: '00123' },
            { input: '12345', expected: '12345' },
            { input: '678', expected: '00678' },
            { input: undefined, expected: 'N/A' },
            { input: null, expected: 'N/A' },
        ];

        const resultsDiv = document.getElementById('results');
        let html = '<table border="1" cellpadding="5"><tr><th>Input</th><th>Expected</th><th>Actual</th><th>Status</th></tr>';

        tests.forEach(test => {
            const actual = formatSccNumber(test.input);
            const status = actual === test.expected ? '✅ PASS' : '❌ FAIL';
            html += `<tr>
                <td>${JSON.stringify(test.input)}</td>
                <td>${test.expected}</td>
                <td>${actual}</td>
                <td>${status}</td>
            </tr>`;
        });

        html += '</table>';
        resultsDiv.innerHTML = html;

        console.log('SCC Formatting Tests Complete');
    </script>
</body>
</html>
