"use strict";(self.webpackChunkvue_dashboard_blueprint=self.webpackChunkvue_dashboard_blueprint||[]).push([[40519],{40519:(e,a,l)=>{l.r(a),l.d(a,{default:()=>V});var s=l(65043),i=l(68684),n=l(92458),t=l(95770),c=l(8818),o=l(95761),r=l(29130),d=l(25078),h=l(38846),u=l(57939),m=l(212),p=l(4173),x=l(71965),j=l(92662),v=l(90659),b=l(95966),g=l(14888),C=l(66153),y=l(19308),N=l(26419),f=l(7290),k=l(18399),S=l(85791),R=l(75786),A=l(89379),w=l(98934),I=l(67452),E=l(11782),M=l(99463),W=l(62821),D=l(34826),O=l(47487),T=l(89615),U=l(70579);const L=e=>{let{onAutoAllocate:a,onOptimizeCapacity:l,onResolveConflicts:s,hasConflicts:i}=e;return(0,U.jsxs)("div",{className:"quick-actions",role:"toolbar","aria-label":"Quick allocation actions",children:[(0,U.jsx)(m.m,{content:"AI will suggest optimal allocation based on pass quality and capacity",children:(0,U.jsx)(p.$,{icon:k.W.LIGHTBULB,intent:h.J.PRIMARY,onClick:a,className:"quick-action-btn",children:"Smart Allocate"})}),(0,U.jsx)(m.m,{content:"Rebalance passes to maximize capacity utilization",children:(0,U.jsx)(p.$,{icon:k.W.DIAGRAM_TREE,onClick:l,className:"quick-action-btn",children:"Optimize Capacity"})}),i&&(0,U.jsx)(m.m,{content:"Automatically resolve scheduling conflicts",children:(0,U.jsx)(p.$,{icon:k.W.RESOLVE,intent:h.J.WARNING,onClick:s,className:"quick-action-btn",children:"Resolve Conflicts"})})]})},z=e=>{let{canUndo:a,canRedo:l,onUndo:s,onRedo:i,changeCount:n}=e;return(0,U.jsxs)("div",{className:"history-controls",role:"group","aria-label":"History controls",children:[(0,U.jsxs)(N.e,{minimal:!0,children:[(0,U.jsx)(m.m,{content:"Undo last change (Ctrl+Z)",children:(0,U.jsx)(p.$,{icon:k.W.UNDO,disabled:!a,onClick:s,"aria-label":"Undo last change"})}),(0,U.jsx)(m.m,{content:"Redo change (Ctrl+Y)",children:(0,U.jsx)(p.$,{icon:k.W.REDO,disabled:!l,onClick:i,"aria-label":"Redo change"})})]}),n>0&&(0,U.jsxs)(u.v,{minimal:!0,intent:h.J.PRIMARY,className:"change-count",children:[n," unsaved ",1===n?"change":"changes"]})]})},J=e=>{let{opportunity:a,availableSites:l,isOpen:i,onClose:n,onSave:t}=e;const[c,o]=(0,s.useState)(new Map),[j,v]=(0,s.useState)(null),[b,C]=(0,s.useState)("all"),[N,R]=(0,s.useState)(""),[J,P]=(0,s.useState)(!1),[G,H]=(0,s.useState)([]),[V,K]=(0,s.useState)(-1),[q,$]=(0,s.useState)(!1),[Y,F]=(0,s.useState)([]),[B,_]=(0,s.useState)(null),Z=(0,s.useRef)(null),Q=((0,s.useRef)(null),(0,s.useRef)(null),(0,s.useMemo)(()=>{const e=["DGS","CLR","FYL","BKK","GRM","NSG","MHS"];return l.slice(0,7).map((a,l)=>({id:"pass-".concat(a.id),siteId:a.id,siteName:a.name,siteCode:e[l%e.length],quality:0===l?"excellent":l<3?"good":l<5?"fair":"poor",passCount:Math.floor(15*Math.random())+5,totalDuration:Math.floor(120*Math.random())+60,peakElevation:Math.floor(60*Math.random())+30,durationThreshold:Math.random()>.7?5:3,capacityUsage:Math.floor(80*Math.random())+20,capacityTotal:100,conflicts:Math.random()>.8?["Schedule conflict with ISR-7"]:void 0,isRecommended:l<3,matchScore:100-15*l}))},[l])),X=(0,s.useMemo)(()=>Array.from(c.values()).reduce((e,a)=>e+a.passes,0),[c]),ee=(0,s.useMemo)(()=>{let e=[...Q];if("all"!==b&&(e=e.filter(e=>e.quality===b)),N){const a=N.toLowerCase();e=e.filter(e=>e.siteName.toLowerCase().includes(a)||e.siteCode.toLowerCase().includes(a))}return J&&(e=e.filter(e=>e.isRecommended)),e.sort((e,a)=>{const l={excellent:0,good:1,fair:2,poor:3},s=l[e.quality]-l[a.quality];return 0!==s?s:(a.matchScore||0)-(e.matchScore||0)})},[Q,b,N,J]);(0,s.useEffect)(()=>{if(i&&Z.current){const e=Z.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');e.length>0&&e[0].focus();const a=e=>{if("Tab"===e.key){const a=Z.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),l=a[0],s=a[a.length-1];e.shiftKey&&document.activeElement===l?(e.preventDefault(),s.focus()):e.shiftKey||document.activeElement!==s||(e.preventDefault(),l.focus())}};return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)}},[i]),(0,s.useEffect)(()=>{const e=e=>{i&&(!e.ctrlKey&&!e.metaKey||"z"!==e.key||e.shiftKey||(e.preventDefault(),ie()),(e.ctrlKey||e.metaKey)&&("y"===e.key||"z"===e.key&&e.shiftKey)&&(e.preventDefault(),ne()),"Escape"===e.key&&0===G.length&&n())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[i,G.length,n]);const ae=(0,s.useCallback)((e,a)=>{const l={siteId:e.siteId,siteName:e.siteName,siteCode:e.siteCode,passes:a,capacity:e.capacityTotal,allocated:e.capacityUsage,availableCapacity:e.capacityTotal-e.capacityUsage,quality:e.quality,elevation:e.peakElevation,duration:e.totalDuration,capacityUsage:e.capacityUsage,timeDistribution:"Mon Wed Fri",overrideReason:""},s=new Map(c);s.set(e.siteId,l),o(s);const i=G.slice(0,V+1);i.push({type:"allocate",pass:e,allocation:l}),H(i),K(i.length-1)},[c,G,V]),le=(0,s.useCallback)((e,a)=>{const l=c.get(e);if(!l)return;const s=Math.max(0,Math.min(20,l.passes+a));if(s===l.passes)return;const i=new Map(c);i.set(e,(0,A.A)((0,A.A)({},l),{},{passes:s})),o(i);const n=G.slice(0,V+1);n.push({type:"adjust",siteId:e,oldValue:l.passes,newValue:s}),H(n),K(n.length-1)},[c,G,V]),se=(0,s.useCallback)((e,a)=>{const l=c.get(e);if(!l)return;const s=new Map(c);s.set(e,(0,A.A)((0,A.A)({},l),{},{overrideReason:a})),o(s)},[c]),ie=(0,s.useCallback)(()=>{if(V<0)return;G[V];K(V-1)},[V,G]),ne=(0,s.useCallback)(()=>{if(V>=G.length-1)return;G[V+1];K(V+1)},[V,G]),te=(0,s.useCallback)(()=>{const e=new Map;ee.filter(e=>e.isRecommended).slice(0,3).forEach(a=>{const l={siteId:a.siteId,siteName:a.siteName,siteCode:a.siteCode,passes:Math.min(10,a.passCount),capacity:a.capacityTotal,allocated:a.capacityUsage,availableCapacity:a.capacityTotal-a.capacityUsage,quality:a.quality,elevation:a.peakElevation,duration:a.totalDuration,capacityUsage:a.capacityUsage,timeDistribution:"Auto-distributed",overrideReason:"AI-optimized allocation"};e.set(a.siteId,l)}),o(e);const a=G.slice(0,V+1);a.push({type:"auto-allocate",allocations:Array.from(e.values())}),H(a),K(a.length-1)},[ee,G,V]),ce=(0,s.useMemo)(()=>Q.some(e=>e.conflicts&&e.conflicts.length>0),[Q]);return(0,U.jsxs)(r.l,{isOpen:i,onClose:n,title:(0,U.jsxs)("div",{className:"workspace-header-accessible",children:[(0,U.jsxs)("div",{className:"header-main",children:[(0,U.jsx)("span",{className:"workspace-icon",children:(0,U.jsx)(S.I,{icon:k.W.FLOWS})}),(0,U.jsx)(g.H3,{children:"Allocation Manager"}),(0,U.jsxs)("div",{className:"header-metadata",role:"region","aria-label":"Satellite information",children:[(0,U.jsxs)(u.v,{minimal:!0,children:["SCC: ",a.sccNumber||"N/A"]}),(0,U.jsx)(u.v,{minimal:!0,children:a.satellite.orbit}),(0,U.jsxs)(u.v,{minimal:!0,intent:"critical"===a.priority?h.J.DANGER:"high"===a.priority?h.J.WARNING:"medium"===a.priority?h.J.PRIMARY:h.J.NONE,children:["Priority: ",a.priorityValue||0]}),(0,U.jsxs)(u.v,{minimal:!0,children:["Periodicity: ",a.periodicity||0," ",a.periodicityUnit||"hours"]})]})]}),(0,U.jsx)(z,{canUndo:V>=0,canRedo:V<G.length-1,onUndo:ie,onRedo:ne,changeCount:G.length})]}),className:"reallocation-workspace-accessible",canEscapeKeyClose:0===G.length,canOutsideClickClose:0===G.length,style:{width:"90vw",maxWidth:"1400px",height:"85vh"},portalContainer:document.body,children:[(0,U.jsxs)("div",{className:d.sar,ref:Z,children:[(0,U.jsxs)("div",{className:"workspace-toolbar",role:"toolbar",children:[(0,U.jsx)(L,{onAutoAllocate:te,onOptimizeCapacity:()=>console.log("Optimize capacity"),onResolveConflicts:()=>console.log("Resolve conflicts"),hasConflicts:ce}),(0,U.jsxs)("div",{className:"toolbar-right",children:[(0,U.jsx)(y.M,{leftIcon:k.W.SEARCH,placeholder:"Search sites...",value:N,onChange:e=>R(e.target.value),"aria-label":"Search available sites"}),(0,U.jsxs)(w.g,{value:b,onChange:e=>C(e.target.value),"aria-label":"Filter by quality",children:[(0,U.jsx)("option",{value:"all",children:"All Quality"}),(0,U.jsx)("option",{value:"excellent",children:"Excellent"}),(0,U.jsx)("option",{value:"good",children:"Good"}),(0,U.jsx)("option",{value:"fair",children:"Fair"}),(0,U.jsx)("option",{value:"poor",children:"Poor"})]}),(0,U.jsx)(x.dO,{checked:J,onChange:e=>P(e.currentTarget.checked),label:"Recommended only","aria-label":"Show only recommended passes"})]})]}),(0,U.jsx)(I.c,{}),(0,U.jsxs)("div",{className:"workspace-panels",role:"main",children:[(0,U.jsxs)("div",{className:"panel panel-left",role:"region","aria-label":"Available passes",children:[(0,U.jsxs)("div",{className:"panel-header",children:[(0,U.jsx)(g.H4,{children:"Available Passes"}),(0,U.jsxs)(u.v,{minimal:!0,children:[ee.length," available"]})]}),(0,U.jsx)("div",{className:"passes-list",role:"list",children:0===ee.length?(0,U.jsx)(f.I,{icon:k.W.SATELLITE,title:"No passes found",description:"Try adjusting your filters"}):ee.map(e=>(0,U.jsxs)(E.Z,{className:"pass-card ".concat((null===j||void 0===j?void 0:j.id)===e.id?"selected":""," ").concat(e.isRecommended?"recommended":""),interactive:!0,onClick:()=>v(e),role:"listitem","aria-selected":(null===j||void 0===j?void 0:j.id)===e.id,"aria-label":"".concat(e.siteName," - ").concat(e.quality," quality, ").concat(e.passCount," passes available"),children:[(0,U.jsxs)("div",{className:"pass-header",children:[(0,U.jsxs)("div",{className:"pass-title",children:[(0,U.jsx)(u.v,{large:!0,minimal:!0,className:"site-code",children:e.siteCode}),(0,U.jsx)("span",{className:"site-name",children:e.siteName}),e.isRecommended&&(0,U.jsx)(m.m,{content:"AI recommends this site based on quality and capacity",children:(0,U.jsx)("span",{className:"recommended-icon",children:(0,U.jsx)(S.I,{icon:k.W.STAR,intent:h.J.WARNING})})})]}),(0,U.jsx)(u.v,{intent:"excellent"===e.quality?h.J.SUCCESS:"good"===e.quality?h.J.PRIMARY:"fair"===e.quality?h.J.WARNING:h.J.NONE,children:e.quality})]}),(0,U.jsxs)("div",{className:"pass-metrics",children:[(0,U.jsxs)("div",{className:"metric-row",children:[(0,U.jsx)("span",{className:"metric-label",children:"Passes:"}),(0,U.jsx)("strong",{children:e.passCount})]}),(0,U.jsxs)("div",{className:"metric-row",children:[(0,U.jsx)("span",{className:"metric-label",children:"Total:"}),(0,U.jsxs)("strong",{children:[e.totalDuration," min"]})]}),(0,U.jsxs)("div",{className:"metric-row",children:[(0,U.jsx)("span",{className:"metric-label",children:"Elevation:"}),(0,U.jsxs)("strong",{children:[e.peakElevation,"\xb0"]})]}),(0,U.jsxs)("div",{className:"metric-row",children:[(0,U.jsx)("span",{className:"metric-label",children:"Duration:"}),(0,U.jsxs)("strong",{children:["> ",e.durationThreshold,"m"]})]})]}),(0,U.jsxs)("div",{className:"pass-capacity",children:[(0,U.jsxs)("div",{className:"capacity-label",children:["Capacity: ",(0,U.jsxs)("strong",{children:[e.capacityUsage,"/",e.capacityTotal]})]}),(0,U.jsx)(M.z,{value:e.capacityUsage/e.capacityTotal,intent:e.capacityUsage>80?h.J.DANGER:e.capacityUsage>60?h.J.WARNING:h.J.SUCCESS,animate:!1,stripes:!1})]}),e.conflicts&&e.conflicts.length>0&&(0,U.jsx)(W.P,{intent:h.J.WARNING,icon:k.W.WARNING_SIGN,compact:!0,children:e.conflicts[0]}),(0,U.jsx)("div",{className:"pass-actions",children:(0,U.jsx)(p.$,{intent:h.J.PRIMARY,fill:!0,disabled:c.has(e.siteId),onClick:a=>{a.stopPropagation(),ae(e,Math.min(5,e.passCount))},children:c.has(e.siteId)?"Already Allocated":"Quick Allocate (5 passes)"})})]},e.id))})]}),(0,U.jsxs)("div",{className:"panel panel-right",role:"region","aria-label":"Allocated sites",children:[(0,U.jsxs)("div",{className:"panel-header",children:[(0,U.jsx)(g.H4,{children:"Allocated Sites"}),(0,U.jsxs)(u.v,{minimal:!0,intent:h.J.PRIMARY,children:[X," passes allocated across ",c.size," sites"]})]}),(0,U.jsx)("div",{className:"allocations-list",role:"list",children:0===c.size?(0,U.jsx)(f.I,{icon:k.W.INBOX_GEO,title:"No allocations yet",description:"Select passes from the left panel or use Smart Allocate",action:(0,U.jsx)(p.$,{intent:h.J.PRIMARY,icon:k.W.LIGHTBULB,onClick:te,children:"Smart Allocate"})}):Array.from(c.values()).map(e=>(0,U.jsxs)(E.Z,{className:"allocation-card",role:"listitem",children:[(0,U.jsxs)("div",{className:"allocation-header",children:[(0,U.jsxs)("div",{className:"allocation-title",children:[(0,U.jsx)(u.v,{large:!0,minimal:!0,className:"site-code",children:e.siteCode}),(0,U.jsx)("span",{className:"site-name",children:e.siteName})]}),(0,U.jsx)(p.$,{minimal:!0,small:!0,intent:h.J.DANGER,icon:k.W.TRASH,onClick:()=>{const a=new Map(c);a.delete(e.siteId),o(a)},"aria-label":"Remove ".concat(e.siteName," allocation")})]}),(0,U.jsxs)("div",{className:"allocation-controls",children:[(0,U.jsx)(D.g,{label:"Collects",inline:!0,children:(0,U.jsxs)("div",{className:"pass-adjuster",role:"group","aria-label":"Adjust pass count",children:[(0,U.jsx)(p.$,{minimal:!0,icon:k.W.MINUS,onClick:()=>le(e.siteId,-1),disabled:e.passes<=0,"aria-label":"Decrease pass count"}),(0,U.jsx)(O.O,{value:e.passes,onValueChange:a=>le(e.siteId,a-e.passes),min:0,max:20,className:"pass-count-input","aria-label":"Pass count"}),(0,U.jsx)(p.$,{minimal:!0,icon:k.W.PLUS,onClick:()=>le(e.siteId,1),disabled:e.passes>=20,"aria-label":"Increase pass count"})]})}),(0,U.jsx)(D.g,{label:"Time Distribution",inline:!0,children:(0,U.jsxs)(w.g,{value:e.timeDistribution,onChange:a=>{const l=new Map(c);l.set(e.siteId,(0,A.A)((0,A.A)({},e),{},{timeDistribution:a.target.value})),o(l)},"aria-label":"Time distribution pattern",children:[(0,U.jsx)("option",{value:"Mon Wed Fri",children:"Mon Wed Fri"}),(0,U.jsx)("option",{value:"Tue Thu Sat",children:"Tue Thu Sat"}),(0,U.jsx)("option",{value:"Daily",children:"Daily"}),(0,U.jsx)("option",{value:"Weekdays",children:"Weekdays"}),(0,U.jsx)("option",{value:"Custom",children:"Custom"})]})})]}),(0,U.jsx)(D.g,{label:"Reason for Override",className:"override-reason",children:(0,U.jsx)(T.f,{value:e.overrideReason,onChange:a=>se(e.siteId,a.target.value),placeholder:"Optional: Explain manual changes...",rows:2,fill:!0,"aria-label":"Override reason"})})]},e.siteId))})]})]}),Y.length>0&&(0,U.jsx)(W.P,{intent:h.J.DANGER,icon:k.W.ERROR,className:"validation-errors",children:Y.map((e,a)=>(0,U.jsx)("div",{children:e},a))})]}),(0,U.jsx)("div",{className:d.DBf,children:(0,U.jsxs)("div",{className:d.Nu2,children:[(0,U.jsx)(p.$,{onClick:n,disabled:q,"aria-label":"Cancel and close",children:"Cancel"}),G.length>0&&(0,U.jsx)(p.$,{onClick:()=>{o(new Map),H([]),K(-1)},disabled:q,"aria-label":"Clear all changes",children:"Clear All"}),(0,U.jsxs)(p.$,{intent:h.J.PRIMARY,onClick:async()=>{if(0!==c.size){$(!0),F([]);try{const e=Array.from(c.values()).map(e=>({opportunityId:a.id,siteId:e.siteId,passes:e.passes,timeDistribution:e.timeDistribution,overrideReason:e.overrideReason}));await t(e),n()}catch(e){F(["Failed to save changes. Please try again."])}finally{$(!1)}}else F(["Please allocate at least one pass before saving."])},loading:q,disabled:0===c.size,"aria-label":"Save ".concat(c.size," allocation").concat(1!==c.size?"s":""),children:["Save Allocations (",c.size,")"]})]})})]})},P=e=>{let{isOpen:a,onClose:l}=e;return(0,U.jsx)(r.l,{isOpen:a,onClose:l,title:"Keyboard Shortcuts",icon:k.W.KEY,canEscapeKeyClose:!0,canOutsideClickClose:!0,children:(0,U.jsx)("div",{className:d.sar,children:(0,U.jsxs)("table",{className:"keyboard-shortcuts-table",role:"table",children:[(0,U.jsx)("thead",{children:(0,U.jsxs)("tr",{children:[(0,U.jsx)("th",{scope:"col",children:"Shortcut"}),(0,U.jsx)("th",{scope:"col",children:"Action"})]})}),(0,U.jsxs)("tbody",{children:[(0,U.jsxs)("tr",{children:[(0,U.jsx)("td",{children:(0,U.jsx)("kbd",{children:"Tab"})}),(0,U.jsx)("td",{children:"Navigate forward through elements"})]}),(0,U.jsxs)("tr",{children:[(0,U.jsx)("td",{children:(0,U.jsx)("kbd",{children:"Shift + Tab"})}),(0,U.jsx)("td",{children:"Navigate backward through elements"})]}),(0,U.jsxs)("tr",{children:[(0,U.jsx)("td",{children:(0,U.jsx)("kbd",{children:"Arrow Keys"})}),(0,U.jsx)("td",{children:"Navigate through table cells"})]}),(0,U.jsxs)("tr",{children:[(0,U.jsx)("td",{children:(0,U.jsx)("kbd",{children:"Enter"})}),(0,U.jsx)("td",{children:"Open allocation modal for selected row"})]}),(0,U.jsxs)("tr",{children:[(0,U.jsx)("td",{children:(0,U.jsx)("kbd",{children:"Space"})}),(0,U.jsx)("td",{children:"Toggle row selection"})]}),(0,U.jsxs)("tr",{children:[(0,U.jsx)("td",{children:(0,U.jsx)("kbd",{children:"Ctrl/Cmd + S"})}),(0,U.jsx)("td",{children:"Save changes"})]}),(0,U.jsxs)("tr",{children:[(0,U.jsx)("td",{children:(0,U.jsx)("kbd",{children:"Ctrl/Cmd + Z"})}),(0,U.jsx)("td",{children:"Undo last change"})]}),(0,U.jsxs)("tr",{children:[(0,U.jsx)("td",{children:(0,U.jsx)("kbd",{children:"Ctrl/Cmd + Y"})}),(0,U.jsx)("td",{children:"Redo last change"})]}),(0,U.jsxs)("tr",{children:[(0,U.jsx)("td",{children:(0,U.jsx)("kbd",{children:"Ctrl/Cmd + A"})}),(0,U.jsx)("td",{children:"Select all rows"})]}),(0,U.jsxs)("tr",{children:[(0,U.jsx)("td",{children:(0,U.jsx)("kbd",{children:"Escape"})}),(0,U.jsx)("td",{children:"Clear selection / Close modal"})]}),(0,U.jsxs)("tr",{children:[(0,U.jsx)("td",{children:(0,U.jsx)("kbd",{children:"?"})}),(0,U.jsx)("td",{children:"Show this help dialog"})]}),(0,U.jsxs)("tr",{children:[(0,U.jsx)("td",{children:(0,U.jsx)("kbd",{children:"Alt + H"})}),(0,U.jsx)("td",{children:"Toggle high contrast mode"})]})]})]})})})},G=()=>(0,U.jsx)("a",{href:"#main-table",className:"skip-navigation",onFocus:e=>e.currentTarget.classList.add("focused"),onBlur:e=>e.currentTarget.classList.remove("focused"),children:"Skip to main table"}),H=s.memo(e=>{let{opportunities:a,availableSites:l,onBatchUpdate:r,onOpenWorkspace:A,capacityThresholds:w={critical:10,warning:30,optimal:70},enableRealTimeValidation:I=!0,enableHealthAnalysis:E=!0,showWorkspaceOption:M=!0}=e;const{state:W,updateOpportunity:D,commitChanges:O,rollbackChanges:T,openWorkspace:L,closeWorkspace:z,undo:H,redo:V,canUndo:K,canRedo:q}=(0,R.BY)(),[$,Y]=(0,s.useState)(""),[F,B]=(0,s.useState)(new Set),[_,Z]=(0,s.useState)(!1),[Q,X]=(0,s.useState)(!1),[ee,ae]=(0,s.useState)(null),[le,se]=(0,s.useState)(()=>"true"===localStorage.getItem("highContrastMode")),[ie,ne]=(0,s.useState)(null),[te,ce]=(0,s.useState)("asc"),[oe,re]=(0,s.useState)(""),de=(0,s.useRef)(null),he=(0,s.useRef)(null),ue=(0,s.useRef)({row:0,col:0}),me=(0,s.useCallback)(e=>{re(e),setTimeout(()=>re(""),1e3)},[]),pe=(0,s.useCallback)(()=>{const e=!le;se(e),localStorage.setItem("highContrastMode",e.toString()),document.body.classList.toggle("high-contrast",e),me(e?"High contrast mode enabled":"High contrast mode disabled")},[le,me]),xe=(0,s.useMemo)(()=>{let e=[...a];if($){const a=$.toLowerCase();e=e.filter(e=>{var l;return e.name.toLowerCase().includes(a)||e.satellite.name.toLowerCase().includes(a)||e.sccNumber&&String(e.sccNumber).includes(a)||(null===(l=e.notes)||void 0===l?void 0:l.toLowerCase().includes(a))})}return ie&&e.sort((e,a)=>{let l,s;switch(ie){case"priority":l=e.priorityValue||0,s=a.priorityValue||0;break;case"match":l=e.matchStatus,s=a.matchStatus;break;case"periodicity":l=e.periodicity||0,s=a.periodicity||0;break;default:l=e[ie],s=a[ie]}return void 0===l||void 0===s?0:l<s?"asc"===te?-1:1:l>s?"asc"===te?1:-1:0}),e},[a,$,ie,te]);(0,s.useEffect)(()=>{const e=e=>{if("?"===e.key&&!e.ctrlKey&&!e.metaKey)return e.preventDefault(),void Z(!0);if(e.altKey&&"h"===e.key)return e.preventDefault(),void pe();if(e.ctrlKey||e.metaKey)switch(e.key){case"s":e.preventDefault(),W.pendingChanges.size>0&&(O(),me("Saving ".concat(W.pendingChanges.size," changes")));break;case"z":e.preventDefault(),K&&(H(),me("Change undone"));break;case"y":e.preventDefault(),q&&(V(),me("Change redone"));break;case"a":e.preventDefault(),B(new Set(xe.map(e=>e.id))),me("Selected all ".concat(xe.length," opportunities"))}if("Escape"===e.key&&F.size>0&&(B(new Set),me("Selection cleared")),"Enter"===e.key&&!e.shiftKey&&1===F.size){const e=Array.from(F)[0],a=xe.find(a=>a.id===e);a&&be(a)}de.current&&["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(e.key)&&(e.preventDefault(),je(e.key))};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[xe,F,W,O,me,pe]);const je=e=>{const{row:a,col:l}=ue.current;let s=a,i=l;switch(e){case"ArrowUp":s=Math.max(0,a-1);break;case"ArrowDown":s=Math.min(xe.length-1,a+1);break;case"ArrowLeft":i=Math.max(0,l-1);break;case"ArrowRight":i=Math.min(10,l+1)}ue.current={row:s,col:i}},ve=(0,s.useCallback)((e,a)=>{const l=new Set(F);a?l.add(e):l.delete(e),B(l);const s=xe.find(a=>a.id===e);s&&me("".concat(s.name," ").concat(a?"selected":"deselected"))},[F,xe,me]),be=(0,s.useCallback)(e=>{ae(e),X(!0),me("Opening allocation modal for ".concat(e.name))},[me]),ge=(0,s.useCallback)(e=>{const a=xe[e],l={low:h.J.NONE,medium:h.J.PRIMARY,high:h.J.WARNING,critical:h.J.DANGER};return(0,U.jsx)(i.f,{children:(0,U.jsxs)("div",{className:"priority-cell",role:"cell","aria-label":"Priority: ".concat((null===a||void 0===a?void 0:a.priorityValue)||"N/A"),children:[(0,U.jsx)(u.v,{intent:l[(null===a||void 0===a?void 0:a.priority)||"low"],large:!0,"aria-label":"".concat(null===a||void 0===a?void 0:a.priority," priority, value ").concat((null===a||void 0===a?void 0:a.priorityValue)||0),children:(null===a||void 0===a?void 0:a.priorityValue)||0}),(0,U.jsxs)("span",{className:"sr-only",children:[null===a||void 0===a?void 0:a.priority," priority"]})]})})},[xe]),Ce=(0,s.useCallback)(e=>{const a=xe[e],l={baseline:"Baseline",suboptimal:"Suboptimal",unmatched:"Unmatched"},s={baseline:h.J.SUCCESS,suboptimal:h.J.WARNING,unmatched:h.J.DANGER};return(0,U.jsx)(i.f,{children:(0,U.jsx)("div",{className:"match-status-cell",role:"cell",children:(0,U.jsx)(u.v,{intent:s[(null===a||void 0===a?void 0:a.matchStatus)||"unmatched"],"aria-label":"Match status: ".concat(l[(null===a||void 0===a?void 0:a.matchStatus)||"unmatched"]),children:l[(null===a||void 0===a?void 0:a.matchStatus)||"unmatched"]})})})},[xe]),ye=(0,s.useCallback)(e=>{const a=xe[e],l=(null===a||void 0===a?void 0:a.matchNotes)||"N/A";return(0,U.jsx)(i.f,{children:(0,U.jsxs)("div",{className:"match-notes-cell",role:"cell","aria-label":"Match notes: ".concat(l),children:["Best Pass"===l&&(0,U.jsx)(u.v,{intent:h.J.SUCCESS,icon:k.W.TICK,children:"Best Pass"}),"Capacity Issue"===l&&(0,U.jsx)(u.v,{intent:h.J.WARNING,icon:k.W.WARNING_SIGN,children:"Capacity Issue"}),"Best Pass"!==l&&"Capacity Issue"!==l&&(0,U.jsx)("span",{children:l})]})})},[xe]),Ne=(0,s.useCallback)(e=>{const a=xe[e];return(0,U.jsx)(i.f,{children:(0,U.jsx)("div",{role:"cell","aria-label":"SCC: ".concat((null===a||void 0===a?void 0:a.sccNumber)||"N/A"),children:(0,U.jsx)("code",{children:(null===a||void 0===a?void 0:a.sccNumber)||"N/A"})})})},[xe]),fe=(0,s.useCallback)(e=>{const a=xe[e];return(0,U.jsx)(i.f,{children:(0,U.jsx)("div",{role:"cell","aria-label":"Function: ".concat((null===a||void 0===a?void 0:a.satellite.function)||"N/A"),children:(null===a||void 0===a?void 0:a.satellite.function)||"N/A"})})},[xe]),ke=(0,s.useCallback)(e=>{const a=xe[e];return(0,U.jsx)(i.f,{children:(0,U.jsx)("div",{role:"cell","aria-label":"Orbit: ".concat((null===a||void 0===a?void 0:a.satellite.orbit)||"N/A"),children:(null===a||void 0===a?void 0:a.satellite.orbit)||"N/A"})})},[xe]),Se=(0,s.useCallback)(e=>{const a=xe[e],l=(null===a||void 0===a?void 0:a.periodicity)||0,s=(null===a||void 0===a?void 0:a.periodicityUnit)||"hours";return(0,U.jsx)(i.f,{children:(0,U.jsx)("div",{role:"cell","aria-label":"Periodicity: ".concat(l," ").concat(s),children:l>0?"".concat(l," ").concat(s):"N/A"})})},[xe]),Re=(0,s.useCallback)(e=>{const a=xe[e],l={optical:"Optical",wideband:"Wideband",narrowband:"Narrowband"};return(0,U.jsx)(i.f,{children:(0,U.jsx)("div",{role:"cell","aria-label":"Collection type: ".concat(l[(null===a||void 0===a?void 0:a.collectionType)||"optical"]),children:l[(null===a||void 0===a?void 0:a.collectionType)||"optical"]})})},[xe]),Ae=(0,s.useCallback)(e=>{const a=xe[e],l=(null===a||void 0===a?void 0:a.classificationLevel)||"UNCLASSIFIED";return(0,U.jsx)(i.f,{children:(0,U.jsx)("div",{role:"cell","aria-label":"Classification: ".concat(l),children:(0,U.jsx)(u.v,{minimal:!0,className:"classification-".concat(l.toLowerCase()),children:"SECRET"===l?"S//REL FVEY":l})})})},[xe]),we=(0,s.useCallback)(e=>{const a=xe[e],l=(null===a||void 0===a?void 0:a.siteAllocationCodes)||[];return(0,U.jsx)(i.f,{children:(0,U.jsx)("div",{role:"cell","aria-label":"Site allocation: ".concat(l.length>0?l.join(", "):"None"),children:l.length>0?(0,U.jsx)("div",{className:"site-codes",children:l.map(e=>(0,U.jsx)(u.v,{minimal:!0,children:e},e))}):(0,U.jsx)("span",{className:d.E4k,children:"None"})})})},[xe]),Ie=(0,s.useCallback)(e=>{const a=xe[e],l=!(null===a||void 0===a||!a.notes);return(0,U.jsx)(i.f,{children:(0,U.jsx)("div",{role:"cell","aria-label":"Notes: ".concat((null===a||void 0===a?void 0:a.notes)||"No notes"),children:l?(0,U.jsx)(m.m,{content:a.notes,children:(0,U.jsx)("span",{className:d.kb2,"data-icon":"comment"})}):(0,U.jsx)("span",{className:d.E4k,children:"\u2014"})})})},[xe]),Ee=(0,s.useCallback)(e=>{const a=xe[e];return(0,U.jsx)(i.f,{children:(0,U.jsx)("div",{className:"name-cell-accessible",children:(0,U.jsx)(p.$,{minimal:!0,className:"opportunity-name-button",onClick:()=>be(a),"aria-label":"Open allocation modal for ".concat(null===a||void 0===a?void 0:a.name),children:(0,U.jsx)("strong",{children:null===a||void 0===a?void 0:a.name})})})})},[xe,be]),Me=(0,s.useCallback)(e=>{const a=xe[e];return a?(0,U.jsx)(i.f,{children:(0,U.jsx)(x.Sc,{checked:F.has(a.id),onChange:e=>ve(a.id,e.currentTarget.checked),"aria-label":"Select ".concat(a.name),className:"row-checkbox"})}):(0,U.jsx)(i.f,{})},[xe,F,ve]),We=(0,s.useCallback)(e=>{const a=ie===e&&"asc"===te?"desc":"asc";ne(e),ce(a),me("Sorting by ".concat(e," in ").concat(a,"ending order"))},[ie,te,me]),De=(e,a)=>()=>(0,U.jsxs)(p.$,{minimal:!0,className:"sortable-header",onClick:()=>We(e),"aria-label":"Sort by ".concat(a," ").concat(ie===e?"asc"===te?"descending":"ascending":""),"aria-sort":ie===e?"asc"===te?"ascending":"descending":"none",children:[a,ie===e&&(0,U.jsx)(S.I,{icon:"asc"===te?k.W.CHEVRON_UP:k.W.CHEVRON_DOWN})]});return(0,s.useEffect)(()=>{document.body.classList.toggle("high-contrast",le)},[]),(0,U.jsxs)("div",{className:"collection-opportunities-accessible ".concat(le?"high-contrast":""),children:[(0,U.jsx)(G,{}),(0,U.jsx)("div",{ref:he,className:"sr-only",role:"status","aria-live":"polite","aria-atomic":"true",children:oe}),(0,U.jsx)("header",{role:"banner",children:(0,U.jsxs)(j.F,{className:"opportunities-navbar","aria-label":"Collection opportunities toolbar",children:[(0,U.jsxs)(v.y,{children:[(0,U.jsx)(b.r,{children:(0,U.jsx)(g.H2,{children:"Satellite Collection Management"})}),(0,U.jsx)(C.c,{}),(0,U.jsx)(y.M,{leftIcon:k.W.SEARCH,placeholder:"Search opportunities...",value:$,onChange:e=>Y(e.target.value),"aria-label":"Search collection opportunities",className:"search-input"})]}),(0,U.jsxs)(v.y,{align:"right",children:[W.pendingChanges.size>0&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)(p.$,{minimal:!0,onClick:()=>T(),"aria-label":"Cancel ".concat(W.pendingChanges.size," pending changes"),children:["Cancel Changes (",W.pendingChanges.size,")"]}),(0,U.jsxs)(p.$,{intent:h.J.PRIMARY,onClick:O,loading:W.isSaving,icon:k.W.CLOUD_UPLOAD,"aria-label":"Save ".concat(W.pendingChanges.size," pending changes"),children:["Save Changes (",W.pendingChanges.size,")"]})]}),(0,U.jsxs)(N.e,{children:[(0,U.jsx)(m.m,{content:"Keyboard shortcuts",children:(0,U.jsx)(p.$,{icon:k.W.KEY,onClick:()=>Z(!0),"aria-label":"Show keyboard shortcuts"})}),(0,U.jsx)(m.m,{content:le?"Disable high contrast":"Enable high contrast",children:(0,U.jsx)(p.$,{icon:k.W.CONTRAST,active:le,onClick:pe,"aria-label":"".concat(le?"Disable":"Enable"," high contrast mode")})})]})]})]})}),(0,U.jsxs)("div",{className:"sr-only","aria-live":"polite",children:[xe.length," opportunities displayed.",F.size>0&&"".concat(F.size," selected."),W.pendingChanges.size>0&&"".concat(W.pendingChanges.size," unsaved changes.")]}),(0,U.jsx)("main",{id:"main-table",role:"main",ref:de,children:0===xe.length?(0,U.jsx)(f.I,{icon:k.W.SEARCH,title:"No opportunities found",description:"Try adjusting your search criteria."}):(0,U.jsx)("div",{role:"region","aria-label":"Collection opportunities table",children:(0,U.jsxs)(n.J,{numRows:xe.length,enableRowHeader:!1,enableColumnHeader:!0,enableRowReordering:!1,enableColumnReordering:!1,enableRowResizing:!1,enableColumnResizing:!0,enableFocusedCell:!0,selectionModes:t.Jj.ROWS_ONLY,renderMode:c.G.BATCH,className:"opportunities-table-accessible",cellRendererDependencies:[xe,F,ie,te],"aria-label":"Collection opportunities data table",role:"table",children:[(0,U.jsx)(o.V,{name:"",cellRenderer:Me,columnHeaderCellRenderer:()=>(0,U.jsx)(x.Sc,{checked:F.size===xe.length&&xe.length>0,indeterminate:F.size>0&&F.size<xe.length,onChange:e=>{e.currentTarget.checked?(B(new Set(xe.map(e=>e.id))),me("Selected all ".concat(xe.length," opportunities"))):(B(new Set),me("Deselected all opportunities"))},"aria-label":"Select all opportunities"})}),(0,U.jsx)(o.V,{name:"Priority",cellRenderer:ge,columnHeaderCellRenderer:De("priority","Priority")}),(0,U.jsx)(o.V,{name:"Match",cellRenderer:Ce,columnHeaderCellRenderer:De("match","Match Status")}),(0,U.jsx)(o.V,{name:"Match Notes",cellRenderer:ye}),(0,U.jsx)(o.V,{name:"SCC",cellRenderer:Ne,columnHeaderCellRenderer:De("sccNumber","SCC")}),(0,U.jsx)(o.V,{name:"Function",cellRenderer:fe,columnHeaderCellRenderer:De("function","Function")}),(0,U.jsx)(o.V,{name:"Orbit",cellRenderer:ke,columnHeaderCellRenderer:De("orbit","Orbit")}),(0,U.jsx)(o.V,{name:"Periodicity",cellRenderer:Se,columnHeaderCellRenderer:De("periodicity","Periodicity")}),(0,U.jsx)(o.V,{name:"Collection Type",cellRenderer:Re}),(0,U.jsx)(o.V,{name:"Classification",cellRenderer:Ae}),(0,U.jsx)(o.V,{name:"Site Allocation",cellRenderer:we}),(0,U.jsx)(o.V,{name:"Notes",cellRenderer:Ie}),(0,U.jsx)(o.V,{name:"Name",cellRenderer:Ee})]})})}),(0,U.jsx)(P,{isOpen:_,onClose:()=>Z(!1)}),Q&&ee&&(0,U.jsx)(J,{opportunity:ee,availableSites:l,isOpen:Q,onClose:()=>{X(!1),ae(null),me("Allocation modal closed")},onSave:async e=>{await r(e),X(!1),ae(null),me("Changes saved successfully")}})]})});H.displayName="CollectionOpportunitiesAccessible";const V=H}}]);
//# sourceMappingURL=40519.70e8ede4.chunk.js.map