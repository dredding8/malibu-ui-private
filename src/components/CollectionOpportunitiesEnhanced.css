/* Collection Opportunities Enhanced Styles */

.collection-opportunities-enhanced {
  height: 100%;
  display: flex;
  flex-direction: column;
  background: var(--bp5-background-color);
}

/* UX Analysis Fix: Increase badge legibility to match History page */
.match-status-tag {
  font-size: 13px !important; /* Increased from 11-12px for better readability */
  padding: 6px 12px !important; /* Increased from 4px 8px for better touch target */
  min-height: 28px !important; /* Match History page badge height */
  font-weight: 600 !important;
  white-space: nowrap;
  flex-shrink: 0;
}

/* IxD Analysis: Add hover feedback for clickable match status cells */
.match-status-cell.clickable {
  padding: 8px;
  border-radius: 4px;
  cursor: pointer;
  transition: background-color 150ms ease-in-out, transform 100ms ease;
}

.match-status-cell.clickable:hover {
  background-color: var(--bp5-intent-primary-transparent-10);
  transform: translateY(-1px);
}

.match-status-cell.clickable:active {
  transform: translateY(0);
  background-color: var(--bp5-intent-primary-transparent-20);
}

.match-status-cell.clickable:focus {
  outline: 2px solid var(--bp5-intent-primary);
  outline-offset: 2px;
}

/* Filter Controls Container - Tag-Based Pattern */
/* Context7: Use Blueprint spacing with calc(var(--bp5-grid-size) * N) for 8px grid */
.filter-controls-container {
  background: var(--bp5-light-gray5);
  border-bottom: 1px solid var(--bp5-divider-black);
  padding: calc(var(--bp5-grid-size) * 3) calc(var(--bp5-grid-size) * 3); /* 24px all sides - generous breathing room */
  margin-bottom: calc(var(--bp5-grid-size) * 3); /* 24px space before table */
  display: flex;
  flex-direction: column;
  gap: calc(var(--bp5-grid-size) * 2); /* 16px vertical gap between rows */
}

/* Filter header with label and clear button */
.filter-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: calc(var(--bp5-grid-size) * 2);
}

.filter-label {
  font-size: 14px;
  font-weight: 400; /* Reduced weight - not a heading */
  letter-spacing: 0.5px;
  text-transform: uppercase;
}

/* Filter tags container - horizontal layout */
.filter-tags-container {
  display: flex;
  align-items: center;
  gap: calc(var(--bp5-grid-size) * 1); /* 8px gap between tags */
  flex-wrap: wrap;
}

/* Tag styling - Context7: Interactive minimal tags for selection */
.filter-tags-container .bp5-tag {
  cursor: pointer;
  transition: all 150ms ease-in-out;
  font-size: 13px;
  padding: calc(var(--bp5-grid-size) * 1) calc(var(--bp5-grid-size) * 1.5); /* 8px 12px */
  border-radius: 16px; /* Pill shape */
  font-weight: 500;
}

/* DESIGN ROUNDTABLE FIX P0: Inactive filter chips should appear interactive, not disabled */
/* Context7: Law of Similarity - use color/border to signal availability vs. opacity for disabled state */
.filter-tags-container .bp5-tag.bp5-minimal {
  background: white; /* Changed from light-gray1 - pure white signals "available" */
  border: 1.5px solid var(--bp5-gray4); /* Slightly thicker border for presence */
  color: var(--bp5-text-color); /* Full color, not muted */
  opacity: 1 !important; /* Never use opacity for inactive state - that signals "disabled" */
}

.filter-tags-container .bp5-tag.bp5-minimal:hover {
  background: var(--bp5-light-gray2); /* Lighter hover than before */
  border-color: var(--bp5-gray2); /* Darker border on hover for feedback */
  transform: translateY(-1px);
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.12); /* Increased shadow for clear hover feedback */
}

/* Active tags - intent colors but subdued */
.filter-tags-container .bp5-tag:not(.bp5-minimal) {
  font-weight: 600;
  transform: scale(1.02);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.12);
}

.filter-tags-container .bp5-tag:not(.bp5-minimal):hover {
  transform: scale(1.02) translateY(-1px);
  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16);
}

/* Filter result summary */
.filter-result-summary {
  font-size: 13px;
  padding-top: calc(var(--bp5-grid-size) * 0.5); /* 4px top padding */
  border-top: 1px solid var(--bp5-divider-black);
}

.filter-result-summary strong {
  font-weight: 600;
  color: var(--bp5-text-color);
}

/* Enhanced priority badges with visual hierarchy */
.priority-badge-critical {
  background-color: rgba(255, 59, 48, 0.1) !important;
  border: 2px solid #FF3B30 !important;
  animation: pulse-priority 2s ease-in-out infinite;
}

@keyframes pulse-priority {
  0%, 100% {
    box-shadow: 0 0 0 0 rgba(255, 59, 48, 0.4);
  }
  50% {
    box-shadow: 0 0 0 8px rgba(255, 59, 48, 0);
  }
}

/* Enhanced Navbar */
.opportunities-navbar {
  background: var(--bp5-card-background-color);
  box-shadow: var(--bp5-elevation-shadow-1);
  padding: calc(var(--bp5-grid-size) * 1) calc(var(--bp5-grid-size) * 2);
  position: sticky;
  top: 0;
  z-index: 10;
}

/* UX Analysis: Fitts's Law compliance - 44px minimum touch target for search */
.search-input-large .bp5-input {
  min-height: 44px !important;
  font-size: 14px;
  padding: 10px 10px 10px 35px; /* Account for icon */
}

.search-input-large .bp5-icon {
  top: 12px; /* Center icon vertically in 44px input */
}

.stats-badges {
  display: flex;
  gap: calc(var(--bp5-grid-size) * 1);
  align-items: center;
}

.stats-badges .bp5-tag {
  font-variant-numeric: tabular-nums;
}

/* Changes summary */
.changes-summary {
  margin: calc(var(--bp5-grid-size) * 2);
  animation: slideDown 0.2s ease;
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Enhanced Table - Enterprise Pattern */
/* Team 1 Fix: Fluid table width with max constraint */
.opportunities-table-enhanced {
  flex: 1;
  width: 100%; /* Fluid width instead of fixed */
  max-width: 1800px; /* Cap expansion on ultra-wide screens */
  margin: calc(var(--bp5-grid-size) * 2) auto; /* Center on ultra-wide */
}

/* Hover Actions - Reduced Visual Noise (Enterprise Pattern) */
.bp5-table-row {
  transition: background-color 150ms ease-in-out;
}

.bp5-table-row:hover {
  background-color: var(--bp5-background-color-hover);
}

/* Hide secondary actions by default */
.actions-cell-enhanced .secondary-actions {
  opacity: 0;
  transition: opacity 200ms ease-in-out;
}

/* Show secondary actions on row hover */
.bp5-table-row:hover .actions-cell-enhanced .secondary-actions {
  opacity: 1;
}

/* Primary action always visible */
.actions-cell-enhanced .primary-action {
  opacity: 1;
}

/* Smooth button transitions */
.actions-cell-enhanced .bp5-button {
  transition: all 150ms ease-in-out;
}

.actions-cell-enhanced .bp5-button:hover {
  transform: translateY(-1px);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

/* Table container styling */
.opportunities-table-enhanced {
  background: var(--bp5-card-background-color);
  border-radius: calc(var(--bp5-border-radius) * 1.5);
  box-shadow: var(--bp5-elevation-shadow-1);
  overflow: hidden;
}

.opportunities-table-enhanced .bp5-table-top-container {
  background: var(--bp5-background-color);
}

.opportunities-table-enhanced .bp5-table-column-header-cell {
  background: var(--bp5-background-color);
  font-weight: 600;
  font-size: 14px; /* Increased from 13px to match cell text size */
  line-height: 1.5; /* WCAG compliance */
  color: var(--bp5-text-color);
  border-right: 1px solid var(--bp5-divider-black);
  border-bottom: 2px solid var(--bp5-divider-black);
}

.sortable-header {
  display: flex;
  align-items: center;
  gap: calc(var(--bp5-grid-size) * 0.5);
  cursor: pointer;
  user-select: none;
}

.sortable-header:hover {
  color: var(--bp5-intent-primary);
}

.sortable-header .bp5-icon {
  transition: transform 0.2s ease;
}

/* Cell styling - Team 3: Text Size & Spacing for WCAG Compliance */
.opportunities-table-enhanced .bp5-table-cell {
  vertical-align: middle;
  padding: calc(var(--bp5-grid-size) * 1.8) calc(var(--bp5-grid-size) * 2); /* Increased from 1.5 (12px → 14.4px vertical) */
  border-right: 1px solid var(--bp5-divider-black);
  border-bottom: 1px solid var(--bp5-divider-black);
  font-size: 14px; /* Increased from default 11-12px for WCAG AA compliance */
  line-height: 1.5; /* WCAG recommended minimum for readability */
  min-height: 52px; /* Ensures adequate touch target: (14.4px * 2) + (14px * 1.5) = 49.8px, rounded to 52px */
}

.status-cell-enhanced {
  display: flex;
  align-items: center;
  gap: calc(var(--bp5-grid-size) * 1);
}

.change-indicator {
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

.name-cell {
  display: flex;
  align-items: center;
  gap: calc(var(--bp5-grid-size) * 1);
}

.name-cell strong {
  font-size: 14px; /* Already meets WCAG requirements */
  line-height: 1.5; /* WCAG compliance */
  color: var(--bp5-text-color);
}

.name-cell .bp5-icon {
  color: var(--bp5-text-color-muted);
}

.name-cell.clickable {
  cursor: pointer;
  transition: all 0.2s ease;
  padding: calc(var(--bp5-grid-size) * 0.5);
  border-radius: var(--bp5-border-radius);
}

.name-cell.clickable:hover {
  background-color: var(--bp5-intent-primary-transparent-10);
}

.name-cell.clickable:hover strong {
  color: var(--bp5-intent-primary);
  text-decoration: underline;
}

.satellite-info {
  display: flex;
  flex-direction: column;
  gap: calc(var(--bp5-grid-size) * 0.25);
}

.satellite-name {
  font-weight: 500;
  font-size: 14px; /* Increased from 13px for consistency and readability */
  line-height: 1.5; /* WCAG compliance */
  color: var(--bp5-text-color);
}

.satellite-meta {
  font-size: 12px; /* Increased from 11px to meet WCAG AA minimum */
  line-height: 1.5; /* WCAG compliance */
}

.sites-summary {
  display: flex;
  flex-direction: column;
  gap: calc(var(--bp5-grid-size) * 0.25);
}

.site-count {
  font-weight: 500;
  font-size: 14px; /* Increased from 13px for consistency */
  line-height: 1.5; /* WCAG compliance */
  color: var(--bp5-text-color);
}

.site-names {
  font-size: 12px; /* Increased from 11px to meet WCAG AA minimum */
  line-height: 1.5; /* WCAG compliance */
  color: var(--bp5-text-color-muted);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.actions-cell-enhanced {
  display: flex;
  align-items: center;
  justify-content: center;
}

.actions-cell-enhanced .bp5-button-group {
  box-shadow: none;
}

/* Card view */
.opportunities-cards {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
  gap: calc(var(--bp5-grid-size) * 2);
  padding: calc(var(--bp5-grid-size) * 2);
}

.opportunity-card {
  background: var(--bp5-card-background-color);
  padding: calc(var(--bp5-grid-size) * 2);
  transition: all 0.2s ease;
}

.opportunity-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--bp5-elevation-shadow-2);
}

/* Row hover effects */
.opportunities-table-enhanced .bp5-table-row-name:hover {
  background: var(--bp5-background-color-hover);
}

.opportunities-table-enhanced .bp5-table-cell.bp5-table-cell-selected {
  background: var(--bp5-background-color-selected);
}

/* Loading states */
.opportunities-table-enhanced.bp5-loading .bp5-table-body {
  opacity: 0.5;
  pointer-events: none;
}

/* Empty state */
.collection-opportunities-enhanced .bp5-non-ideal-state {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Team 4: Column Visibility Toggle Controls */

/* UX Analysis: Hide optional columns by default to comply with Hick's Law (7±2 columns max) */
.optional-column.user-hidden {
  display: none !important;
}

/* Show optional columns when user explicitly toggles them visible */
.optional-column.user-visible {
  display: table-cell !important;
}

/* Always show columns toggle button so users can access hidden columns */
.responsive-columns-toggle {
  display: inline-flex !important;
}

/* Show columns toggle button at <1280px where columns are hidden */
@media (max-width: 1279px) {
  .responsive-columns-toggle {
    display: inline-flex !important;
  }

  /* Hide responsive columns by default at <1280px */
  .responsive-column {
    display: none !important;
  }

  /* Show responsive columns when user toggles them visible */
  .responsive-column.user-visible {
    display: table-cell !important;
  }
}

/* Responsive design */

/* Ultra-wide displays (1920px+) - Team 1 & 3: Fluid width + Enhanced text scaling */
@media (min-width: 1920px) {
  /* Team 1: Fluid table width - 95% utilization */
  .opportunities-table-enhanced {
    width: 95%; /* 95% utilization, leave margins for comfort */
    margin: calc(var(--bp5-grid-size) * 2) auto;
  }

  /* Team 3: Enhanced text scaling */
  .opportunities-table-enhanced .bp5-table-cell {
    font-size: 15px; /* Enhanced readability on large displays */
    padding: calc(var(--bp5-grid-size) * 2) calc(var(--bp5-grid-size) * 2.4); /* 16px vertical, 19.2px horizontal */
    min-height: 56px; /* Increased row height: (16px * 2) + (15px * 1.5) = 54.5px, rounded to 56px */
  }

  .opportunities-table-enhanced .bp5-table-column-header-cell {
    font-size: 15px;
  }

  .satellite-name,
  .site-count,
  .name-cell strong {
    font-size: 15px;
  }

  .satellite-meta,
  .site-names {
    font-size: 13px; /* Secondary text remains readable */
  }
}

/* Standard desktop (1440-1919px) - Team 1: Fluid width */
@media (min-width: 1440px) and (max-width: 1919px) {
  .opportunities-table-enhanced {
    width: 97%; /* 97% utilization */
    margin: calc(var(--bp5-grid-size) * 2) auto;
  }
}

/* Standard laptop (1280-1439px) - Team 1: Fluid width */
@media (min-width: 1280px) and (max-width: 1439px) {
  .opportunities-table-enhanced {
    width: 98%; /* 98% utilization */
    margin: calc(var(--bp5-grid-size) * 2) auto;
  }
}

/* Small laptop/tablet landscape (1024-1279px) - Team 1 & 3: Fluid width + Optimized spacing */
@media (min-width: 1024px) and (max-width: 1279px) {
  /* Team 1: Fluid table width - 100% utilization, no overflow */
  .opportunities-table-enhanced {
    width: 100%;
    margin: calc(var(--bp5-grid-size) * 1.5) auto;
  }

  /* Team 3: Optimized spacing */
  .opportunities-table-enhanced .bp5-table-cell {
    font-size: 13px; /* Balanced for medium screens */
    padding: calc(var(--bp5-grid-size) * 1.6) calc(var(--bp5-grid-size) * 1.8); /* 12.8px vertical */
    min-height: 48px; /* (12.8px * 2) + (13px * 1.5) = 45.1px, rounded to 48px */
  }

  /* Team 1: Compress action buttons slightly */
  .actions-cell-enhanced .bp5-button {
    min-width: 60px;
    padding: 6px 10px;
    font-size: 13px;
  }
}

@media (max-width: 1200px) {
  .opportunities-navbar .bp5-navbar-group {
    flex-wrap: wrap;
    gap: calc(var(--bp5-grid-size) * 1);
  }

  .stats-badges {
    order: 3;
    width: 100%;
    margin-top: calc(var(--bp5-grid-size) * 1);
  }
}

@media (max-width: 768px) {
  .opportunities-table-enhanced {
    margin: calc(var(--bp5-grid-size) * 1);
  }

  .opportunities-cards {
    grid-template-columns: 1fr;
    padding: calc(var(--bp5-grid-size) * 1);
  }

  .opportunities-table-enhanced .bp5-table-cell {
    padding: calc(var(--bp5-grid-size) * 1.4) calc(var(--bp5-grid-size) * 1.5); /* Increased from 1 (8px → 11.2px vertical) */
    font-size: 13px; /* Compressed but still meets WCAG AA minimum of 12px */
    min-height: 48px; /* Minimum touch target for mobile */
  }

  .site-names {
    display: none;
  }

  .actions-cell-enhanced .bp5-button-group {
    flex-direction: column;
  }
}

/* ==========================================
   TEAM 2: Column Width Optimizations
   ========================================== */

/* Priority column: Reduce from 150px to 80px (displays single digits 1-4) */
.opportunities-table-enhanced .bp5-table-column-name-Priority,
.opportunities-table-enhanced .bp5-table-header-cell:nth-child(1) {
  width: 80px !important;
  min-width: 60px !important;
  max-width: 100px !important;
}

.opportunities-table-enhanced .bp5-table-cell:nth-child(1) {
  width: 80px !important;
  text-align: center;
}

/* Match column: Reduce from 150px to 120px (displays badge) */
.opportunities-table-enhanced .bp5-table-column-name-Match,
.opportunities-table-enhanced .bp5-table-header-cell:nth-child(2):not(:has(*[class*="Notes"])) {
  width: 120px !important;
  min-width: 100px !important;
  max-width: 140px !important;
}

.opportunities-table-enhanced .bp5-table-cell:nth-child(2) {
  width: 120px !important;
}

/* Match Notes: Optimize width for tooltip content */
.opportunities-table-enhanced .bp5-table-column-name-MatchNotes,
.opportunities-table-enhanced .bp5-table-header-cell:nth-child(3) {
  width: 180px !important;
  min-width: 150px !important;
  max-width: 220px !important;
}

/* Site Allocation: Allow flexible expansion */
.opportunities-table-enhanced .bp5-table-column-name-SiteAllocation,
.opportunities-table-enhanced .bp5-table-header-cell:nth-child(7) {
  min-width: 180px !important;
  width: auto !important;
  flex: 1 1 auto;
}

/* SCC, Function, Orbit: Keep compact */
.opportunities-table-enhanced .bp5-table-column-name-SCC,
.opportunities-table-enhanced .bp5-table-header-cell:nth-child(4),
.opportunities-table-enhanced .bp5-table-column-name-Function,
.opportunities-table-enhanced .bp5-table-header-cell:nth-child(5),
.opportunities-table-enhanced .bp5-table-column-name-Orbit,
.opportunities-table-enhanced .bp5-table-header-cell:nth-child(6) {
  width: 120px !important;
  min-width: 100px !important;
}

/* ==========================================
   TEAM 2: Responsive Column Hiding
   Note: Works with Team 4's user toggle controls
   ========================================== */

/* Hide low-priority columns at tablet breakpoint (1280px) */
@media (max-width: 1279px) {
  /* Visual indicator for hidden columns */
  .opportunities-table-enhanced::after {
    content: "2 columns hidden at this screen size (Collection Type, Classification)";
    display: block;
    text-align: center;
    padding: 8px 12px;
    background: rgba(245, 166, 35, 0.08);
    border-top: 1px solid rgba(245, 166, 35, 0.25);
    color: #8A6D3B;
    font-size: 12px;
    font-weight: 500;
    line-height: 1.5;
  }
}

/* Extreme space constraints: Also hide Match Notes at 1024px */
@media (max-width: 1023px) {
  .opportunities-table-enhanced .bp5-table-column-name-MatchNotes,
  .opportunities-table-enhanced .bp5-table-header-cell:nth-child(3),
  .opportunities-table-enhanced .bp5-table-cell:nth-child(3) {
    display: none !important;
  }

  .opportunities-table-enhanced::after {
    content: "3 columns hidden at this screen size (Match Notes, Collection Type, Classification)";
  }
}

/* Dark theme support - Blueprint handles most automatically via CSS variables */
.bp5-dark .opportunities-navbar {
  box-shadow: var(--bp5-elevation-shadow-1);
}

/* Print styles */
@media print {
  .opportunities-navbar,
  .changes-summary,
  .actions-cell-enhanced {
    display: none;
  }

  .collection-opportunities-enhanced {
    background: white;
  }

  .opportunities-table-enhanced {
    box-shadow: none;
    margin: 0;
  }

  /* Team 2: Remove hidden column notice for print */
  .opportunities-table-enhanced::after {
    display: none !important;
  }
}
/* Satellite info with data integrity */
.satellite-name {
  display: flex;
  align-items: center;
  gap: calc(var(--bp5-grid-size) * 1);
}

.satellite-name .data-integrity-indicator {
  display: inline-flex;
  align-items: center;
  gap: calc(var(--bp5-grid-size) * 0.5);
}
